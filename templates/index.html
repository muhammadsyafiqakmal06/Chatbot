<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="{{url_for('static', filename='bot.css')}}">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <title>Chatbot</title>
</head>

<body>
    <section>
        <div class="container py-5">

            <!-- Modal -->
            <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel"
                aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="exampleModalLabel">Informasi Sistem</h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="modal-body">
                            Sistem ini berbasis bahasa indonesia, pertanyaan wajib menggunakan bahasa indonesia yang
                            baik dan benar.
                            Sistem ini mengcover layanan dari Biro Sistem Informasi (BSI), layanan yang diberikan oleh
                            BSI yaitu portal, Email dan Elearning.
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-primary" data-bs-dismiss="modal">Mengerti</button>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row d-flex justify-content-center">
                <div class="col-md-8 col-lg-6 col-xl-4">

                    <div class="card" id="chat-log" style="border-radius: 15px;">
                        <div class="card-header d-flex justify-content-between align-items-center p-3 bg-info text-white border-bottom-0"
                            style="border-top-left-radius: 15px; border-top-right-radius: 15px;">
                            <a href="/reset" style="text-decoration: none; color: white;">
                                <p class="mb-0 fw-bold">Live chat</p>
                            </a>
                            <!-- Button trigger modal -->
                            <button type="button" class="btn" data-bs-toggle="modal" data-bs-target="#exampleModal"
                                style="background-color: #0dcaf0;">
                                <i class="fa fa-info-circle" aria-hidden="true"></i>
                            </button>
                        </div>
                        <div class="card-body">
                            {% for message in chat_log %}
                            {% if message.sender == "user" %}
                            <!-- pertanyaan -->
                            <div class="d-flex flex-row justify-content-end mb-4">
                                <div class="p-3 me-3 border" style="border-radius: 15px; background-color: #fbfbfb;">
                                    <p class="small mb-0">{{ message.content }}</p>
                                </div>
                                <img src="{{url_for('static', filename='student.png')}}" alt="avatar 1"
                                    style="width: 45px; height: 100%;">
                            </div>
                            <!-- jawaban -->
                            {% else %}
                            <div class="d-flex flex-row justify-content-start mb-4">
                                <img src="{{url_for('static', filename='bot.png')}}" alt="avatar 1"
                                    style="width: 45px; height: 100%;">
                                <div class="p-3 ms-3"
                                    style="border-radius: 15px; background-color: rgba(57, 192, 237,.2);">
                                    <p class="small mb-0">{{ message.content }}</p>
                                </div>
                            </div>
                            <!-- end -->
                            {% endif %}
                            {% endfor %}
                            <form method="POST" action="/">
                                <input type="text" id="user_input" name="user_input" placeholder="Enter your message"
                                    class="form-control" autofocus>
                                <input class="btn btn-success" type="submit" value="Send" hidden>
                            </form>
                        </div>
                    </div>

                </div>
            </div>

        </div>
    </section>
</body>

</html>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
    crossorigin="anonymous"></script>